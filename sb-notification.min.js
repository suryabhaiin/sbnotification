class SBNotification{static show(t={}){try{const{message:n=" ",duration:e=5,showTime:o=!1,accentColor:i="#00ffff",bgColor:a="#111",textColor:s="#fff",textAlign:r="left",sound:c=null,position:l="right-top",autoHide:d=!0,combine:f=!0,width:p="300px"}=t,x=SBNotification.getContainer(l,p);if(SBNotification.showTime=o,d||(SBNotification.showTime=!1),SBNotification.autoHide=d,x.shadowRoot.querySelector("#sb-notification-style")||SBNotification.addStyles(x.shadowRoot),c&&SBNotification.playSound(c),f){let t=[...x.shadowRoot.children].find((t=>t.querySelector(".sb-text")?.textContent===n));if(t)return x.shadowRoot.prepend(t),void SBNotification.restartNotification(t,e,l)}const m=SBNotification.createNotification(n,e,i,a,s,r,l);x.shadowRoot.prepend(m),SBNotification.startNotification(m,e,l)}catch(t){console.error("SBNotification Error:",t)}}static restartNotification(t,n,e){try{const o=t.querySelector(".sb-progress-bar"),i=t.querySelector(".sb-time-counter");clearTimeout(t.sbTimeout),clearInterval(t.sbInterval);let a=n;i&&(i.textContent=a),t.sbInterval=setInterval((()=>{a>0?(a-=1,i&&(i.textContent=a)):clearInterval(t.sbInterval)}),1e3),o.style.transition="none",o.style.width="100%",SBNotification.autoHide&&(setTimeout((()=>{o.style.transition=`width ${n}s linear`,o.style.width="0%"}),10),t.sbTimeout=setTimeout((()=>SBNotification.remove(t,e)),1e3*n))}catch(t){console.error("Error restarting notification:",t)}}static createNotification(t,n,e,o,i,a,s){const r=document.createElement("div");r.classList.add("sb-notification","sb-show"),r.style.setProperty("--sb-bg-color",o),r.style.setProperty("--sb-text-color",i),r.style.setProperty("--sb-accent-color",e),r.style.setProperty("--sb-text-align",a);const c=document.createElement("span");c.classList.add("sb-time-counter"),c.textContent=n;const l=document.createElement("span");l.classList.add("sb-text"),l.textContent=t;const d=document.createElement("span");d.classList.add("sb-close"),d.innerHTML="&times;",d.onclick=()=>SBNotification.remove(r,s,!0);const f=document.createElement("div");return f.classList.add("sb-progress-bar"),f.style.transition=`width ${n}s linear`,SBNotification.showTime&&r.appendChild(c),r.appendChild(l),r.appendChild(d),r.appendChild(f),r}static startNotification(t,n,e){try{if(SBNotification.autoHide){setTimeout((()=>{const n=t.querySelector(".sb-progress-bar");n&&(n.style.width="0%")}),10);let o=n;t.sbInterval=setInterval((()=>{if(o>0){o-=1;const n=t.querySelector(".sb-time-counter");n&&(n.textContent=o)}else clearInterval(t.sbInterval)}),1e3),t.sbTimeout=setTimeout((()=>SBNotification.remove(t,e)),1e3*n)}}catch(t){console.error("Error starting notification:",t)}}static remove(t,n,e=!1){try{if(!t)return;e&&(clearTimeout(t.sbTimeout),clearInterval(t.sbInterval)),"right-top"===n||"right-center"===n?(t.style.opacity="0",t.style.transform="translateX(100%)"):"left-top"===n||"left-center"===n?(t.style.opacity="0",t.style.transform="translateX(-100%)"):(t.style.opacity="0",t.style.transform="scale(0) 1s ease"),setTimeout((()=>t.remove()),500)}catch(t){console.error("Error removing notification:",t)}}static getContainer(t,n){n=n||"300px";let e=document.getElementById("sb-notification-host-"+t);if(!e){e=document.createElement("div"),e.id="sb-notification-host-"+t,document.body.appendChild(e),e.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent="right-top"===t?"\n                    #sb-notification-host-right-top {\n                        position: fixed;\n                        top: 50px;\n                        right: 20px;\n                        width: "+n+";\n                        display: flex;\n                        flex-direction: column;\n                        align-items: flex-end;\n                        z-index: 99999999999999;\n                        gap: 10px;\n                        max-width: 80%;\n                    }\n                ":"right-center"===t?"\n                    #sb-notification-host-right-center {\n                        position: fixed;\n                        top: 50%;\n                        right: 20px;\n                        transform: translateY(-50%);\n                        width: "+n+";\n                        display: flex;\n                        flex-direction: column;\n                        align-items: flex-end;\n                        z-index: 99999999999999;\n                        gap: 10px;\n                        max-width: 80%;\n                    }\n                ":"left-center"===t?"\n                    #sb-notification-host-left-center {\n                        position: fixed;\n                        top: 50%;\n                        left: 20px;\n                        transform: translateY(-50%);\n                       width: "+n+";\n                        display: flex;\n                        flex-direction: column;\n                        align-items: flex-start;\n                        z-index: 99999999999999;\n                        gap: 10px;\n                        max-width: 80%;\n                    }\n                ":"left-top"===t?"\n                    #sb-notification-host-left-top {\n                        position: fixed;\n                        top: 50px;\n                        left: 20px;\n                        width: "+n+";\n                        display: flex;\n                        flex-direction: column;\n                        align-items: flex-start;\n                        z-index: 99999999999999;\n                        gap: 10px;\n                        max-width: 80%;\n                    }\n                ":"center-top"===t?"\n                    #sb-notification-host-center-top {\n                        position: fixed;\n                        top: 50px;\n                        left: 50%;\n                        transform: translateX(-50%);\n                        width:  "+n+";\n                        display: flex;\n                        flex-direction: column;\n                        align-items: center;\n                        z-index: 99999999999999;\n                        gap: 10px;\n                        max-width: 80%;\n                    }\n                ":"center"===t?"\n                    #sb-notification-host-center {\n                        position: fixed;\n                        top: 50%;\n                        left: 50%;\n                        transform: translate(-50%, -50%);\n                        width:  "+n+";\n                        display: flex;\n                        flex-direction: column;\n                        align-items: center;\n                        z-index: 99999999999999;\n                        gap: 10px;\n                        max-width: 80%;\n                    }\n                ":"\n                    #sb-notification-host-"+t+" {\n                        position: fixed;\n                        top: 50px;\n                        right: 20px;\n                        width: "+n+";\n                        display: flex;\n                        flex-direction: column;\n                        align-items: flex-end;\n                        z-index: 99999999999999;\n                        gap: 10px;\n                        max-width: 80%;\n                    }\n                ",document.head.appendChild(o)}return e}static addStyles(t){const n=document.createElement("style");n.id="sb-notification-style",n.innerHTML="\n            :host {\n                --sb-bg-color: #111;\n                --sb-text-color: #fff;\n                --sb-accent-color: #00ffff;\n                --sb-text-align: left;\n            }\n            .sb-notification {\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                padding: 5px 8px;\n                width: 100%;\n                min-height: 50px;\n                background: var(--sb-bg-color);\n                color: var(--sb-text-color);\n                border-left: 4px solid var(--sb-accent-color);\n                border-radius: 8px;\n                box-shadow: 0 0 10px var(--sb-accent-color);\n                opacity: 1;\n                transform: translateX(0);\n                transition: opacity 0.5s, transform 0.5s;\n                position: relative;\n                overflow: hidden;\n                max-width: 100%;\n                margin-bottom: 10px;\n            }\n\n            .sb-notification.sb-show {\n                transform: translateX(0);\n            }\n\n            .sb-time-counter {\n                flex-shrink: 0;\n                width: 28px;\n                height: 28px;\n                padding: 3px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border: 2px solid var(--sb-accent-color);\n                border-radius: 50%;\n                font-size: 14px;\n                font-weight: bold;\n                box-shadow: 0 0 10px var(--sb-accent-color);\n            }\n\n            .sb-text {\n                flex-grow: 1;\n                text-align: var(--sb-text-align);\n                margin-left: 7px;\n                margin-right: 7px;\n                margin-top: 15px;\n                margin-bottom: 15px;\n            }\n\n            .sb-close {\n                background: none;\n                border: none;\n                color: var(--sb-text-color);\n                font-size: 18px;\n                font-weight: bold;\n                cursor: pointer;\n                position: absolute;\n                top: 0px;\n                right: 7px;\n                margin-left: 0;\n            }\n\n            .sb-close:hover {\n                color: var(--sb-accent-color);\n            }\n\n            .sb-progress-bar {\n                position: absolute;\n                bottom: 0;\n                left: 0;\n                height: 4px;\n                background: var(--sb-accent-color);\n                width: 100%;\n                transition: width linear;\n            }\n        ",t.appendChild(n)}static playSound(t){try{if(!t)return;SBNotification.sb_notification_flag||SBNotification.simulateBodyClick(),SBNotification.audioInstance&&(clearTimeout(SBNotification.audioTimeout),SBNotification.audioInstance.pause(),SBNotification.audioInstance.currentTime=0),SBNotification.audioTimeout=setTimeout((()=>{SBNotification.audioInstance=new Audio(t),SBNotification.audioInstance.play().catch((t=>console.error("Sound playback failed:",t)))}),500)}catch(t){console.error("Error playing sound:",t)}}static simulateBodyClick(){if(document.body){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.body.dispatchEvent(t),SBNotification.sb_notification_flag=!0}}}